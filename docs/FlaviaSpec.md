# Flavia - 個人専用AI献立アシスタント 要件定義書

## 📋 アプリケーション概要

### プロダクト名
**Flavia** (Food & Lifestyle AI Via Intelligence Assistant)

### プロダクトビジョン
私専用の食事嗜好と予算を完全に理解し、複数スーパーの特売情報を活用して、最適化された献立提案と買い物プランを提供するパーソナルAIアシスタント

### 核心的な価値提案

#### 🧠 **超高度パーソナライゼーション**
- **深層学習**: 私の食事嗜好、調理パターン、購買行動を長期間学習
- **状況適応**: 体調、気分、疲労度、季節変化に応じた提案調整
- **継続進化**: 使用するほど精度が向上する自己改善システム
- **複雑嗜好対応**: 「2日に1回は鶏肉」「魚は週3回まで」等の細かいルール管理

#### 💰 **徹底的コスト最適化**
- **リアルタイム特売活用**: 複数サイトの最新チラシ情報を統合分析
- **価格予測**: 過去データから価格トレンドを予測、買い時を提案
- **無駄削減**: 冷蔵庫在庫と有効期限を考慮した計画的買い物
- **予算管理**: 月額・週額予算に基づく自動調整

#### ⚡ **完全自動化による時短**
- **ワンクリック献立**: 「疲れた」→即座に15分調理メニュー提案
- **音声対応**: 「明日のランチ何にしよう」→即答
- **買い物効率化**: 店舗別・売り場別に最適化されたリスト
- **調理手順**: レシピ表示から買い物まで完全ガイド

#### 🏠 **完全環境適応**
- **調理環境最適化**: 利用可能な調理器具に完全対応
- **時間制約対応**: 平日30分、休日60分等の時間枠内で提案
- **技術レベル適応**: 調理スキルに応じた難易度自動調整
- **季節対応**: 旬の食材活用と体調管理メニュー

### 🎯 解決する具体的な問題

#### 献立決定の苦痛を完全解消
```yaml
従来の問題:
  - 毎日「今日何食べよう」で悩む時間: 平均15分/日
  - マンネリ化: 同じメニューの繰り返し
  - 栄養偏り: バランス管理の手間
  - 予算超過: 計画性のない買い物

Flaviaの解決:
  - 献立決定時間: 30秒以内
  - バリエーション: 過去30日間重複なし保証
  - 栄養管理: 自動バランス調整
  - 予算管理: 目標予算±5%以内達成率95%
```

#### 買い物の非効率性を根本解決
```yaml
従来の問題:
  - 特売情報の見落とし
  - 無駄な商品購入
  - 複数店舗の価格比較困難
  - 買い忘れ・重複購入

Flaviaの解決:
  - 全特売情報自動監視
  - 必要分のみ精密計算
  - 最安値店舗自動選択
  - 完璧な買い物リスト生成
```

#### 食材無駄と栄養偏りを同時解決
```yaml
従来の問題:
  - 冷蔵庫の死蔵食材
  - 栄養バランス管理困難
  - 体調不良時の食事選択困難

Flaviaの解決:
  - 在庫活用率98%達成
  - 自動栄養バランス調整
  - 体調・気分対応メニュー
```

### 🚀 技術的独自性

#### AI駆動の高度な意思決定エンジン
```yaml
多目的最適化:
  - 嗜好満足度 × コスト × 栄養 × 時間 の4次元最適化
  - 制約条件: 在庫、特売、調理環境、時間
  - 動的調整: リアルタイム状況変化対応

機械学習による継続改善:
  - 嗜好変化の自動検出
  - 季節パターンの学習
  - 失敗要因分析と回避

予測分析:
  - 価格変動予測
  - 在庫消費予測
  - 嗜好変化予測
```

#### 高度なWebインテリジェンス
```yaml
自動情報収集:
  - 複数サイト並列監視
  - 構造化データ自動抽出
  - 価格変動リアルタイム追跡

データ統合・分析:
  - 商品名正規化（「鶏もも肉」「鶏モモ」「鶏腿肉」→統一）
  - 単価換算（100g, 1kg, 1パック→統一基準）
  - トレンド分析（曜日別、月別価格パターン）
```

### 🎨 ユーザーエクスペリエンス設計

#### 直感的インターフェース
```yaml
入力方式:
  - テキスト: "疲れた、簡単なもの"
  - 音声: "明日の夕食何にしよう"
  - 画像: 冷蔵庫撮影→自動認識
  - ワンクリック: "いつもの献立"

出力形式:
  - 瞬間回答: 3秒以内の提案
  - 段階的詳細: 概要→詳細→レシピ→買い物
  - 視覚的表現: 料理写真、栄養グラフ、価格推移
```

#### 学習型パーソナライゼーション
```yaml
無意識学習:
  - 選択パターン自動分析
  - 時間帯別嗜好変化検出
  - 体調変化時の選択傾向

能動的改善:
  - 「おいしかった」「微妙だった」フィードバック
  - 「もう少し辛く」「次は魚にしたい」要望学習
  - 「この組み合わせは好み」パターン記憶
```

### 📊 期待される成果指標

#### 実用性指標
```yaml
時短効果:
  - 献立決定時間: 15分 → 30秒（96%短縮）
  - 買い物時間: 60分 → 40分（33%短縮）
  - 調理準備時間: 10分 → 3分（70%短縮）

コスト効果:
  - 食費削減: 月平均15-25%
  - 食材廃棄削減: 90%以上
  - 特売活用率: 80%以上

満足度指標:
  - メニュー採用率: 95%以上
  - リピート希望: 90%以上
  - 栄養バランス改善: 体感的向上
```

#### 学習・改善指標
```yaml
精度向上:
  - 嗜好予測精度: 使用3ヶ月で90%達成
  - 予算管理精度: ±5%以内達成率95%
  - 在庫活用率: 98%達成

システム成熟度:
  - 提案バリエーション: 30日間重複率5%以下
  - 失敗率: 月次3%以下
  - ユーザー満足度: 継続使用意向95%以上
```

### 🔮 将来拡張可能性

#### 健康管理統合
- 体重・体調データ連携
- カロリー・栄養素詳細管理
- 健康目標達成支援

#### 社会性機能
- 家族・友人との献立共有
- コミュニティレシピ交換
- 地域特産品活用提案

#### IoT統合
- スマート冷蔵庫連携
- 調理器具自動制御
- 音声アシスタント統合

このように、Flaviaは単なる献立提案アプリではなく、**食生活全体を知的に最適化する次世代AIパートナー**として設計されています。

---

## 🎯 ユーザー（私）専用設定

### 個人プロファイル前提
- **家族構成**: 1人暮らし
- **監視対象スーパー**: チラシWebサイト経由
- **調理環境**: 一般的なキッチン（ガスコンロ、電子レンジ、冷凍庫あり）
- **食事スタイル**: 自炊中心、たまに外食

---

## 📊 RAGデータベース設計（エディタで管理）

### ファイル構成
```
flavia-agent/
├── docs/
│   └── requirements.md                 # この要件定義書
├── rag_data/
│   ├── user_profile.yaml              # 私の食事嗜好データ
│   ├── supermarket_list.yaml          # よく行くスーパー情報  
│   ├── recipe_database.yaml           # お気に入りレシピDB
│   └── nutrition_preferences.yaml     # 栄養・健康設定
├── agent/
│   ├── flavia_agent.py                # メインエージェント
│   ├── tools/
│   │   ├── scraper.py                 # 特売情報取得
│   │   ├── meal_planner.py            # 献立生成
│   │   └── budget_calculator.py       # 予算計算
│   └── prompts/
│       ├── system_prompt.md           # システムプロンプト
│       └── meal_generation.md         # 献立生成プロンプト
├── ui/
│   └── streamlit_app.py               # WebUI
├── data/
│   ├── sales_cache/                   # 特売情報キャッシュ
│   └── meal_history/                  # 献立履歴
└── tests/
    └── test_agent.py                  # テストコード
```

---

## 🔄 個人利用に最適化されたユースケース

### UC001: 平日夜の簡単献立
```markdown
**シーン**: 仕事終わりの夜、疲れている
**入力**: "今日は疲れたから20分以内で作れるもの、冷蔵庫に○○がある"
**期待結果**: 手軽で栄養バランスの取れた1食分提案
```

### UC002: 週末の買い物計画
```markdown
**シーン**: 週末にまとめ買いしたい
**入力**: "来週1週間分の食材を買いたい、予算3000円"
**期待結果**: 7日分の献立と最適化された買い物リスト
```

### UC003: 特売活用メニュー
```markdown
**シーン**: 特売情報を見て献立を決めたい
**入力**: "今日のチラシで鶏肉が安いから活用したい"
**期待結果**: 鶏肉を使った数日分のバリエーション提案
```

---

## ⚙️ 機能要件（個人利用特化）

### F001: 私専用プロファイル
- **F001-1**: 固定された個人設定（外部入力不要）
- **F001-2**: 学習による嗜好の自動更新
- **F001-3**: 季節・体調による嗜好変化対応

### F002: 超シンプル入力インターフェース
- **F002-1**: 冷蔵庫撮影→自動認識
- **F002-2**: 音声入力対応
- **F002-3**: "疲れた"→簡単メニュー自動選択
- **F002-4**: 1クリック献立生成

### F003: 私の行動パターン学習
- **F003-1**: よく作る料理の傾向分析
- **F003-2**: 買い物頻度・タイミング学習
- **F003-3**: 失敗した料理の記録・回避

### F004: スーパーチラシ完全対応
- **F004-1**: 登録WebサイトのチラシURL自動取得
- **F004-2**: 各サイトの価格傾向分析
- **F004-3**: 最安値商品の自動推奨
- **F004-4**: 複数サイト横断比較

---

## 🔄 入力・出力仕様（個人利用版）

### 📥 超シンプル入力

#### 音声・テキスト入力例
```yaml
シンプル入力パターン:
  - "疲れた、簡単なもの"
  - "魚が食べたい気分"
  - "冷蔵庫に鶏肉がある"
  - "今週の買い物リスト作って"
  - "昨日と違うもの"
  - "安く済ませたい"

冷蔵庫確認:
  - 写真アップロード
  - 簡単チェックリスト
  - "いつもの在庫"設定
```

### 📤 パーソナライズド出力

#### 私向けカスタマイズ出力
```yaml
献立提案:
  タイトル: "今日のおすすめ"
  メイン料理: "鶏の照り焼き（いつものレシピ）"
  調理時間: "25分"
  コメント: "先週好評だった味付けで、今日マルエツで鶏肉特売中です"
  
買い物リスト:
  スーパーA（チラシURL: https://example-supermarket.com/sale）:
    - 鶏もも肉 特売128円/100g
    - キャベツ 98円
  
  スーパーB（チラシURL: https://another-market.jp/flyer）:
    - 調味料など（スーパーAより安い場合）
    
  購入タイミング: "明日の夕方がベスト（新しい特売開始）"
  
予算:
  今回: "420円"
  今月累計: "12,400円/15,000円"
  節約額: "先月比-800円"
```

---

## 🔧 技術仕様（個人利用最適化）

### システム要件
- **デプロイ**: ローカル実行優先（プライバシー重視）
- **データ保存**: ローカルファイル + クラウドバックアップ
- **AI**: Claude 4（Anthropic API）
- **UI**: Streamlit（シンプル・高速）

### セキュリティ要件
- **個人データ**: 完全ローカル管理
- **API Key**: 環境変数管理
- **バックアップ**: 暗号化してクラウド保存

---

## 🚀 開発優先順位（個人利用版）

### Phase 1: 基本機能（最優先）
- [x] 個人プロファイル設定
- [ ] 冷蔵庫在庫管理
- [ ] 基本献立提案
- [ ] シンプルUI

### Phase 2: 学習機能
- [ ] 嗜好学習アルゴリズム
- [ ] 特売情報自動取得
- [ ] 買い物リスト最適化

### Phase 3: 高度化
- [ ] 音声入力
- [ ] 画像認識
- [ ] 栄養分析

---

## 📈 個人向け成功指標

### 実用性指標
- **実際に作った割合**: 90%以上
- **買い物リスト使用率**: 100%
- **予算達成率**: 95%以上
- **時短効果**: 献立決定時間5分→30秒

### 満足度指標
- **おいしかった料理**: 記録・学習
- **失敗した料理**: 原因分析・改善
- **リピートしたい度**: 5段階評価

---

## 💡 個人利用のメリット

### エディタでRAG管理する理由
1. **プライバシー**: 食事嗜好は超個人情報
2. **精密性**: 自分で正確にデータを記述
3. **更新容易**: 嗜好変化を即座に反映
4. **バックアップ**: Gitで履歴管理
5. **カスタマイズ**: 自由自在に調整可能

### 個人エージェントの価値
1. **完全理解**: 私だけの複雑な嗜好を把握
2. **継続学習**: 長期間使うほど精度向上
3. **無駄なし**: 不要な機能を省いた最適化
4. **コスト効率**: 私の行動パターンで最大節約

---

この要件定義書を基に、完全に私専用のFlaviaを構築します！
